---
title: gooroom-packaging
date: 2017-10-12 15:45:56
tags:
---

구름플랫폼 패키지
===============
구름플랫폼은 데비안을 바탕으로 하되, 클라우드 기반 업무에 필요한 요소만을 선별하여 패키징 하였습니다. 목적에 맞게 재패키징함으로써, 공격면 (Attack Surface)의 축소나 경량화와 같은 장점을 기대해볼 수 있습니다.

공격면 축소
---------------
Ubuntu, CentOS 등 널리 쓰이는 리눅스 배포판들은 범용(General Purpose)으로 개발되어, 사용자가 잘 사용하지 않는 패키지들도 함께 설치합니다. 불필요한 패키지를 설치할 경우 디스크 공간을 낭비하게 되는 것도 문제이나, 사이버위협을 가중하는 요인이 되기도 합니다. 해킹, 악성코드 전파 등 비인가접근을 통해 정보유출이나 침투를 가능케하는 요소 및 절차 등을 공격면이라 하는데, 소프트웨어의 덩치가 커질수록 공격면이 커지는 경향이 있으므로, 불필요한 패키지들을 제거하는 것이 공격면을 줄일 수 있습니다.    
구름은 이러한 공격면을 측량하여 플랫폼의 안전도를 비교, 판단하는 잣대로 삼기 위하여 '안전성 정량화 기준'을 제시합니다.

안전성 정량화 기준
---------------
구름은 주어진 설치 패키지에 대하여, 다음과 같은 요소를 고려하여 분석하고, 각 요소별 배정 점수를 산출할 후, 최종 합산하여 해당 패키지의 안전도를 수치로 나타냅니다.
* [분석요소 1] 실행 가능 파일 분석: 패키지 내에 존재하는 실행파일들의 종류를 고려하여 점수를 배정합니다. 실행파일 유무에 따라, 실행파일이 스크립트 파일인지 ELF 파일인지에 따라, SUID/SGID 비트 유무에 따라 점수를 배정합니다.
* [분석요소 2] 취약점 분석: 패키지와 관련하여 보고되는 CVE([Common Vulnerability and Exposures](https://cve.mitre.org/)) 데이터를 분석하고 취약점 발견이 증가하는 추세인지, 감소하는 추세인지 등을 고려하여 점수를 배정합니다.  
* [분석요소 3] 코드 복잡성 분석: 패키지의 소스코드가 존재할 경우, 소스코드의 복잡도(순환복잡도, 소스코드 크기 등)를 분석하여 점수를 배정합니다.
* [분석요소 4] 영향력 분석: 해당패키지에 의존성을 가지는 다른 패키지의 수를 고려하여 점수를 배정합니다.

구름은 [구름 개발자 웹사이트](https://pss.gooroom.kr/safety/show)를 통해 안전성 정량화 분석 결과를 게시합니다. 또한 이 안전성 정량화 점수는 구름플랫폼에 탑재된 시냅틱 관리자에서도 확인 가능합니다.  

![안전성 정량화 점수](/images/safety-score.png)

안전성 정량화 점수는 어떤 패키지의 보안성을 나타내는 정확한 수치는 아닙니다. 그러나 패키지의 공격면을 예측하기 위한 대략적인 기준을 제시합니다. 현재 안전성 정량화 점수 측정 대상을 넓히고, 다양한 측정요소를 고려할 수 있도록 고도화 중입니다. 사용자 및 배포판 개발자들은 안전성 정량화 점수를 다음과 같이 활용할 수 있습니다.
* 사용자: FTP 클라이언트, 텔넷 데몬 등 유사한 기능을 가진 패키지들 중에서 특정 패키지를 선택하고자 할 때, 안전성 정량화 점수를 참고할 수 있습니다. 또한 구름플랫폼은 설치된 패키지들의 정량점수 총합을 표시합니다. 이를 바탕으로 패키지를 설치하고 삭제함에 따라 공격면의 총량을 예측해볼 수 있습니다.
* 배포판 개발자: 유사한 기능을 가진 패키지들의 안전성 정량화 점수를 참고하여, 배포판에 포함할 패키지를 선택할 수 있습니다.

커널 테일러링(tailoring)
---------------
범용 배포판에 포함된 리눅스 커널은 사용자에게 불필요한 기능들을 포함할 수 있습니다. 이러한 불필요한 커널 기능을 제거하면 커널의 공격면이 줄어듭니다. 커널 수준 취약점은 일반적인 응용 프로그램 취약점에 비하여 심각한 보안문제를 야기하므로 커널의 공격면 축소는 보안성 향상을 위해 필요합니다.  

커널 공격면 축소를 위해서는 커널 컴파일 옵션을 선택하고 컴파일 하는 과정을 필요로하는데, 커널 컴파일 옵션과 사용자의 유즈케이스간 대응관계를 파악하기가 쉽지 않고, 커널 기능 간 의존성이 존재하여 수 많은 컴파일 과정과 테스트가 필요합니다. 구름 개발자들은 이러한 어려움 극복을 위해, 유즈케이스에 맞게 자동으로 커널 옵션을 선별하고 컴파일하여, 오류없이 동작하는 커널을 생산하는 방법을 연구하고 있습니다. 이러한 연구 결과는 리눅스 최대 컨퍼런스인 Open Source Summit 2017에서 발표된 바 있습니다. 해당 기술은 현재 구름플랫폼에 탑재된 커널 도출을 위해 일부 적용되었습니다.
* [A Practical Approach of Tailoring Linux Kernel](https://ossna2017.sched.com/speaker/ultract)
